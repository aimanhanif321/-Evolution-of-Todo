{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/quater4/hachthone-ll/evolution-of-todos/frontend/src/context/AuthContext.tsx"],"sourcesContent":["// src/context/AuthContext.tsx\r\n\"use client\";\r\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\n\r\ninterface User {\r\n  id: string;\r\n  email: string;\r\n  name: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  token: string | null;\r\n  login: (token: string, userData: User) => void;\r\n  logout: () => void;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem(\"token\");\r\n    const storedUser = localStorage.getItem(\"user\");\r\n    if (storedToken && storedUser) {\r\n      setToken(storedToken);\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const publicPaths = [\"/auth/login\", \"/auth/register\"];\r\n    if (!isLoading) {\r\n      if (!token && !publicPaths.includes(pathname)) router.push(\"/auth/login\");\r\n      else if (token && publicPaths.includes(pathname)) router.push(\"/dashboard\");\r\n    }\r\n  }, [token, pathname, isLoading, router]);\r\n\r\n  const login = (newToken: string, userData: User) => {\r\n    setToken(newToken);\r\n    setUser(userData);\r\n    localStorage.setItem(\"token\", newToken);\r\n    localStorage.setItem(\"user\", JSON.stringify(userData));\r\n    router.push(\"/dashboard\");\r\n  };\r\n  \r\n\r\n  const logout = () => {\r\n    setToken(null);\r\n    setUser(null);\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"user\");\r\n    router.push(\"/auth/login\");\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{ user, token, login, logout, isAuthenticated: !!token, isLoading }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) throw new Error(\"useAuth must be used within AuthProvider\");\r\n  return context;\r\n};\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;;;AAE9B;AACA;AAFA;;;;AAmBA,MAAM,4BAAc,IAAA,kOAAa,EAA8B;AAExD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAc;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAgB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6NAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,2JAAS;IACxB,MAAM,WAAW,IAAA,6JAAW;IAE5B,IAAA,8NAAS,EAAC;QACR,MAAM,cAAc,aAAa,OAAO,CAAC;QACzC,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,eAAe,YAAY;YAC7B,SAAS;YACT,QAAQ,KAAK,KAAK,CAAC;QACrB;QACA,aAAa;IACf,GAAG,EAAE;IAEL,IAAA,8NAAS,EAAC;QACR,MAAM,cAAc;YAAC;YAAe;SAAiB;QACrD,IAAI,CAAC,WAAW;YACd,IAAI,CAAC,SAAS,CAAC,YAAY,QAAQ,CAAC,WAAW,OAAO,IAAI,CAAC;iBACtD,IAAI,SAAS,YAAY,QAAQ,CAAC,WAAW,OAAO,IAAI,CAAC;QAChE;IACF,GAAG;QAAC;QAAO;QAAU;QAAW;KAAO;IAEvC,MAAM,QAAQ,CAAC,UAAkB;QAC/B,SAAS;QACT,QAAQ;QACR,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,OAAO,IAAI,CAAC;IACd;IAGA,MAAM,SAAS;QACb,SAAS;QACT,QAAQ;QACR,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,0PAAC,YAAY,QAAQ;QACnB,OAAO;YAAE;YAAM;YAAO;YAAO;YAAQ,iBAAiB,CAAC,CAAC;YAAO;QAAU;kBAExE;;;;;;AAGP;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,IAAA,+NAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT","debugId":null}}]
}