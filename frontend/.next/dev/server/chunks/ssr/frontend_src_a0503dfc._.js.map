{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/quater4/hachthone-ll/evolution-of-todos/frontend/src/lib/api.ts"],"sourcesContent":["// // src/lib/api.ts\r\n// const API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\";\r\n\r\n// type RequestMethod = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\" | \"PATCH\";\r\n\r\n// class APIClient {\r\n//   private static async request<T>(\r\n//     endpoint: string,\r\n//     method: RequestMethod,\r\n//     body?: any,\r\n//     token?: string\r\n//   ): Promise<T> {\r\n//     const headers: HeadersInit = { \"Content-Type\": \"application/json\" };\r\n//     if (token) headers[\"Authorization\"] = `Bearer ${token}`;\r\n\r\n//     const config: RequestInit = { method, headers };\r\n//     if (body) config.body = JSON.stringify(body);\r\n\r\n//     const response = await fetch(`${API_URL}${endpoint}`, config);\r\n\r\n//     if (response.status === 401) throw new Error(\"Unauthorized. Please login again.\");\r\n//     if (response.status === 404) throw new Error(\"Endpoint not found.\");\r\n//     if (response.status === 405) throw new Error(\"Method not allowed.\");\r\n//     if (!response.ok) {\r\n//       let data;\r\n//       try {\r\n//         data = await response.json();\r\n//       } catch {\r\n//         throw new Error(\"Failed to parse server response\");\r\n//       }\r\n//       throw new Error(data?.detail || data?.message || \"Request failed\");\r\n//     }\r\n\r\n//     if (response.status === 204) return {} as T;\r\n\r\n//     return (await response.json()) as T;\r\n//   }\r\n\r\n//   static get<T>(endpoint: string, token?: string) {\r\n//     return this.request<T>(endpoint, \"GET\", undefined, token);\r\n//   }\r\n\r\n//   static post<T>(endpoint: string, body: any, token?: string) {\r\n//     return this.request<T>(endpoint, \"POST\", body, token);\r\n//   }\r\n\r\n//   static put<T>(endpoint: string, body: any, token?: string) {\r\n//     return this.request<T>(endpoint, \"PUT\", body, token);\r\n//   }\r\n\r\n//   static delete<T>(endpoint: string, token?: string) {\r\n//     return this.request<T>(endpoint, \"DELETE\", undefined, token);\r\n//   }\r\n// }\r\n\r\n// export default APIClient;\r\n// src/lib/api.ts\r\n// src/lib/api.ts\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\";\r\n\r\ntype RequestMethod = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\" | \"PATCH\";\r\n\r\nclass APIClient {\r\n  private static async request<T>(\r\n    endpoint: string,\r\n    method: RequestMethod,\r\n    body?: any,\r\n    token?: string\r\n  ): Promise<T> {\r\n    const headers: HeadersInit = { \"Content-Type\": \"application/json\" };\r\n    \r\n    // âœ… Token from parameter or localStorage\r\n    const finalToken = token || localStorage.getItem(\"token\");\r\n    if (finalToken) headers[\"Authorization\"] = `Bearer ${finalToken}`;\r\n\r\n    const config: RequestInit = { method, headers };\r\n    if (body) config.body = JSON.stringify(body);\r\n\r\n    const response = await fetch(`${API_URL}${endpoint}`, config);\r\n\r\n    if (response.status === 401) throw new Error(\"Unauthorized. Please login again.\");\r\n    if (response.status === 404) throw new Error(\"Endpoint not found.\");\r\n    if (!response.ok) {\r\n      let data;\r\n      try { data = await response.json(); } catch {}\r\n      throw new Error(data?.detail || data?.message || \"Request failed\");\r\n    }\r\n\r\n    if (response.status === 204) return {} as T;\r\n\r\n    return (await response.json()) as T;\r\n  }\r\n\r\n  static get<T>(endpoint: string, token?: string) {\r\n    return this.request<T>(endpoint, \"GET\", undefined, token);\r\n  }\r\n\r\n  static post<T>(endpoint: string, body?: any, token?: string) {\r\n    return this.request<T>(endpoint, \"POST\", body, token);\r\n  }\r\n\r\n  static put<T>(endpoint: string, body: any, token?: string) {\r\n    return this.request<T>(endpoint, \"PUT\", body, token);\r\n  }\r\n\r\n  static delete<T>(endpoint: string, token?: string) {\r\n    return this.request<T>(endpoint, \"DELETE\", undefined, token);\r\n  }\r\n\r\n  static patch<T>(endpoint: string, body?: any, token?: string) {\r\n    return this.request<T>(endpoint, \"PATCH\", body, token);\r\n  }\r\n}\r\n\r\nexport default APIClient;\r\n"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,8EAA8E;AAE9E,oEAAoE;AAEpE,oBAAoB;AACpB,qCAAqC;AACrC,wBAAwB;AACxB,6BAA6B;AAC7B,kBAAkB;AAClB,qBAAqB;AACrB,oBAAoB;AACpB,2EAA2E;AAC3E,+DAA+D;AAE/D,uDAAuD;AACvD,oDAAoD;AAEpD,qEAAqE;AAErE,yFAAyF;AACzF,2EAA2E;AAC3E,2EAA2E;AAC3E,0BAA0B;AAC1B,kBAAkB;AAClB,cAAc;AACd,wCAAwC;AACxC,kBAAkB;AAClB,8DAA8D;AAC9D,UAAU;AACV,4EAA4E;AAC5E,QAAQ;AAER,mDAAmD;AAEnD,2CAA2C;AAC3C,MAAM;AAEN,sDAAsD;AACtD,iEAAiE;AACjE,MAAM;AAEN,kEAAkE;AAClE,6DAA6D;AAC7D,MAAM;AAEN,iEAAiE;AACjE,4DAA4D;AAC5D,MAAM;AAEN,yDAAyD;AACzD,oEAAoE;AACpE,MAAM;AACN,IAAI;AAEJ,4BAA4B;AAC5B,iBAAiB;AACjB,iBAAiB;;;;;AACjB,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAInD,MAAM;IACJ,aAAqB,QACnB,QAAgB,EAChB,MAAqB,EACrB,IAAU,EACV,KAAc,EACF;QACZ,MAAM,UAAuB;YAAE,gBAAgB;QAAmB;QAElE,yCAAyC;QACzC,MAAM,aAAa,SAAS,aAAa,OAAO,CAAC;QACjD,IAAI,YAAY,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,YAAY;QAEjE,MAAM,SAAsB;YAAE;YAAQ;QAAQ;QAC9C,IAAI,MAAM,OAAO,IAAI,GAAG,KAAK,SAAS,CAAC;QAEvC,MAAM,WAAW,MAAM,MAAM,GAAG,UAAU,UAAU,EAAE;QAEtD,IAAI,SAAS,MAAM,KAAK,KAAK,MAAM,IAAI,MAAM;QAC7C,IAAI,SAAS,MAAM,KAAK,KAAK,MAAM,IAAI,MAAM;QAC7C,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,IAAI;YACJ,IAAI;gBAAE,OAAO,MAAM,SAAS,IAAI;YAAI,EAAE,OAAM,CAAC;YAC7C,MAAM,IAAI,MAAM,MAAM,UAAU,MAAM,WAAW;QACnD;QAEA,IAAI,SAAS,MAAM,KAAK,KAAK,OAAO,CAAC;QAErC,OAAQ,MAAM,SAAS,IAAI;IAC7B;IAEA,OAAO,IAAO,QAAgB,EAAE,KAAc,EAAE;QAC9C,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU,OAAO,WAAW;IACrD;IAEA,OAAO,KAAQ,QAAgB,EAAE,IAAU,EAAE,KAAc,EAAE;QAC3D,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU,QAAQ,MAAM;IACjD;IAEA,OAAO,IAAO,QAAgB,EAAE,IAAS,EAAE,KAAc,EAAE;QACzD,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU,OAAO,MAAM;IAChD;IAEA,OAAO,OAAU,QAAgB,EAAE,KAAc,EAAE;QACjD,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU,UAAU,WAAW;IACxD;IAEA,OAAO,MAAS,QAAgB,EAAE,IAAU,EAAE,KAAc,EAAE;QAC5D,OAAO,IAAI,CAAC,OAAO,CAAI,UAAU,SAAS,MAAM;IAClD;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///D:/quater4/hachthone-ll/evolution-of-todos/frontend/src/app/auth/login/page.tsx"],"sourcesContent":["\n// src/app/login/page.tsx\n\"use client\";\nimport React, { useState } from \"react\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport APIClient from \"@/lib/api\";\nimport Link from \"next/link\";\n\nexport default function LoginPage() {\n  const { login } = useAuth();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const res = await APIClient.post<{ access_token: string }>(\"/api/auth/login\", {\n        email,\n        password,\n      });\n      const token = res.access_token;\n\n      // Decode token for user info (if available)\n      let user = { id: \"unknown\", email, name: \"User\" };\n      try {\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\n        user = {\n          id: payload.sub || payload.user_id || \"unknown\",\n          email: payload.email || email,\n          name: payload.name || \"User\",\n        };\n      } catch {}\n\n      login(token, user);\n    } catch (err: any) {\n      setError(err.message || \"Login failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-md mx-auto mt-16\">\n      <h2 className=\"text-3xl font-bold text-slate-900\">Welcome back</h2>\n      <form onSubmit={handleSubmit} className=\"space-y-6 mt-6\">\n        {error && <div className=\"p-4 rounded bg-red-50 text-red-500\">{error}</div>}\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          required\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          className=\"w-full px-4 py-3 border rounded\"\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          required\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"w-full px-4 py-3 border rounded\"\n        />\n        <button disabled={loading} className=\"w-full py-3 bg-indigo-600 text-white rounded\">\n          {loading ? \"Signing in...\" : \"Sign in\"}\n        </button>\n      </form>\n      <p className=\"mt-4 text-center text-sm\">\n        Don't have an account?{\" \"}\n        <Link href=\"/auth/register\" className=\"text-indigo-600\">\n          Sign up\n        </Link>\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AACA,yBAAyB;;;;;;AAEzB;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,qJAAO;IACzB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IAEvC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI;YACF,MAAM,MAAM,MAAM,wIAAS,CAAC,IAAI,CAA2B,mBAAmB;gBAC5E;gBACA;YACF;YACA,MAAM,QAAQ,IAAI,YAAY;YAE9B,4CAA4C;YAC5C,IAAI,OAAO;gBAAE,IAAI;gBAAW;gBAAO,MAAM;YAAO;YAChD,IAAI;gBACF,MAAM,UAAU,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;gBACnD,OAAO;oBACL,IAAI,QAAQ,GAAG,IAAI,QAAQ,OAAO,IAAI;oBACtC,OAAO,QAAQ,KAAK,IAAI;oBACxB,MAAM,QAAQ,IAAI,IAAI;gBACxB;YACF,EAAE,OAAM,CAAC;YAET,MAAM,OAAO;QACf,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAClD,0PAAC;gBAAK,UAAU;gBAAc,WAAU;;oBACrC,uBAAS,0PAAC;wBAAI,WAAU;kCAAsC;;;;;;kCAC/D,0PAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,QAAQ;wBACR,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,WAAU;;;;;;kCAEZ,0PAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,QAAQ;wBACR,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wBAC3C,WAAU;;;;;;kCAEZ,0PAAC;wBAAO,UAAU;wBAAS,WAAU;kCAClC,UAAU,kBAAkB;;;;;;;;;;;;0BAGjC,0PAAC;gBAAE,WAAU;;oBAA2B;oBACf;kCACvB,0PAAC,mLAAI;wBAAC,MAAK;wBAAiB,WAAU;kCAAkB;;;;;;;;;;;;;;;;;;AAMhE","debugId":null}}]
}