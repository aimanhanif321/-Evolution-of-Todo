{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/quater4/hachthone-ll/evolution-of-todos/frontend/src/app/auth/login/page.tsx"],"sourcesContent":["// \"use client\";\n// import React, { useState } from 'react';\n// import { useAuth } from '@/context/AuthContext';\n// import APIClient from '@/lib/api';\n// import Link from 'next/link';\n\n// export default function LoginPage() {\n//   const { login } = useAuth();\n//   const [email, setEmail] = useState('');\n//   const [password, setPassword] = useState('');\n//   const [error, setError] = useState('');\n//   const [loading, setLoading] = useState(false);\n\n\n\n//   const handleSubmit = async (e: React.FormEvent) => {\n//   e.preventDefault();\n//   setError('');\n//   setLoading(true);\n\n//   try {\n//     // Send login request to backend\n//     const res = await APIClient.post<{ access_token: string }>(\"/api/auth/login\", { email, password });\n//     const token = res.access_token;\n    \n\n//     // Decode token to get user info\n//     const payload = JSON.parse(atob(token.split('.')[1]));\n//     const user = {\n//       id: payload.sub || 'unknown',\n//       email: payload.email || email,\n//       name: payload.name || 'User',\n//     };\n\n//     // Store token + user in AuthContext\n//     login(token, user);\n\n//   } catch (err: any) {\n//     const msg = err.message || 'Login failed';\n//     setError(msg);\n//   } finally {\n//     setLoading(false);\n//   }\n  \n// };\n\n//   return (\n//     <div className=\"w-full max-w-md mx-auto mt-16\">\n//       <div className=\"mb-8\">\n//         <h2 className=\"text-3xl font-bold text-slate-900\">Welcome back</h2>\n//         <p className=\"text-slate-500 mt-2\">Please enter your details to sign in.</p>\n//       </div>\n\n//       <form onSubmit={handleSubmit} className=\"space-y-6\">\n//         {error && (\n//           <div className=\"p-4 rounded-md bg-red-50 text-red-500 text-sm\">{error}</div>\n//         )}\n\n//         <div className=\"space-y-2\">\n//           <label htmlFor=\"email\" className=\"block text-sm font-medium text-slate-700\">Email</label>\n//           <input\n//             id=\"email\"\n//             type=\"email\"\n//             required\n//             placeholder=\"Enter your email\"\n//             className=\"w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all\"\n//             value={email}\n//             onChange={(e) => setEmail(e.target.value)}\n//           />\n//         </div>\n\n//         <div className=\"space-y-2\">\n//           <label htmlFor=\"password\" className=\"block text-sm font-medium text-slate-700\">Password</label>\n//           <input\n//             id=\"password\"\n//             type=\"password\"\n//             required\n//             placeholder=\"••••••••\"\n//             className=\"w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all\"\n//             value={password}\n//             onChange={(e) => setPassword(e.target.value)}\n//           />\n//         </div>\n\n//         <button\n//           type=\"submit\"\n//           disabled={loading}\n//           className=\"w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n//         >\n//           {loading ? 'Signing in...' : 'Sign in'}\n//         </button>\n//       </form>\n\n//       <div className=\"mt-6 text-center text-sm text-slate-500\">\n//         Don't have an account?{' '}\n//         <Link href=\"/auth/register\" className=\"text-indigo-600 font-semibold hover:text-indigo-500\">\n//           Sign up\n//         </Link>\n//       </div>\n//     </div>\n//   );\n// }\n\n\n\n\n\n\n\n\n\n\n\n\"use client\";\nimport React, { useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport APIClient from '@/lib/api';\nimport Link from 'next/link';\n\n\nexport default function LoginPage() {\n  const { login } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    try {\n      // const res = await APIClient.post<any>('/auth/login', { email, password });\n      // The contract says: data: { access_token: \"...\", token_type: \"bearer\" }\n      // We need user info too. The contract for login doesn't return user info.\n      // We might need to fetch me, or maybe the plan/contract implies we decode it?\n      // Wait, the plan says \"Connect to API.auth.login\".\n      // Contract: Login returns access_token.\n      // Problem: AuthProvider expects User object.\n      // Solution: Parse JWT if it contains user info, OR fetch /me if exists.\n      // Contract doesn't show /me or user info in login response.\n      // Let's check api contracts again or assume we can get it.\n      // For now, I'll use a placeholder user or try to decode the token if possible (but I don't have a decoder lib).\n      // Actually, let's look at Register contract - it returns user info.\n      // Login contract only returns token.\n      // I will assume for now I can fetch user info or the token has it.\n      // I'll make a subsequent call to getting user tasks to verify? No that returns tasks.\n      // I'll decoding the payload from the token manually (base64 decode).\n\n      const token = res.data.access_token;\n      localStorage.setItem(\"token\", token);\n\n\n      // Simple payload decode\n      let user = { id: 'unknown', email, name: 'User' };\n      try {\n        const payload = JSON.parse(atob(token.split('.')[1]));\n        // specific fields depend on backend JWT structure\n        user = {\n          id: payload.sub || payload.user_id || 'unknown',\n          email: payload.email || email,\n          name: payload.name || 'User'\n        };\n      } catch (e) {\n        console.error(\"Failed to decode token\", e);\n      }\n\n      login(token, user);\n    } catch (err: any) {\n      setError(err.message || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"mb-8\">\n        <h2 className=\"text-3xl font-bold text-slate-900\">Welcome back</h2>\n        <p className=\"text-slate-500 mt-2\">Please enter your details to sign in.</p>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {error && (\n          <div className=\"p-4 rounded-md bg-red-50 text-red-500 text-sm\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"space-y-2\">\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-slate-700\">Email</label>\n          <input\n            id=\"email\"\n            type=\"email\"\n            required\n            className=\"w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all\"\n            placeholder=\"Enter your email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <label htmlFor=\"password\" className=\"block text-sm font-medium text-slate-700\">Password</label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            required\n            className=\"w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all\"\n            placeholder=\"••••••••\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {loading ? 'Signing in...' : 'Sign in'}\n        </button>\n      </form>\n\n      <div className=\"mt-6 text-center text-sm text-slate-500\">\n        Don't have an account?{' '}\n        <Link href=\"/auth/register\" className=\"text-indigo-600 font-semibold hover:text-indigo-500\">\n          Sign up\n        </Link>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}