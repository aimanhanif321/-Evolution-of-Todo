(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1831,e=>{"use strict";let t=e.i(39057).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",s=class{static async request(e,s,a,l){let i={"Content-Type":"application/json"};l&&(i.Authorization=`Bearer ${l}`);let r={method:s,headers:i};a&&(r.body=JSON.stringify(a));try{let s=await fetch(`${t}${e}`,r);if(401===s.status)throw Error("Unauthorized");if(!s.ok){let e="An error occurred";try{let t=await s.json();e=t.detail||t.message||e}catch(t){e=s.statusText}throw Error(e)}if(204===s.status)return{};return await s.json()}catch(e){throw e}}static get(e,t){return this.request(e,"GET",void 0,t)}static post(e,t,s){return this.request(e,"POST",t,s)}static put(e,t,s){return this.request(e,"PUT",t,s)}static patch(e,t,s){return this.request(e,"PATCH",t,s)}static delete(e,t){return this.request(e,"DELETE",void 0,t)}};e.s(["default",0,s])},36080,e=>{"use strict";var t=e.i(48277),s=e.i(30668),a=e.i(53904),l=e.i(1831),i=e.i(35884);let r=(0,i.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),o=(0,i.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),d=(0,i.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),n=(0,i.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function c({task:e,onUpdate:i,onEdit:c}){let{user:u,token:h}=(0,a.useAuth)(),[m,x]=(0,s.useState)(!1),p=new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=async()=>{if(u&&h&&!m){x(!0);try{await l.default.patch(`/api/${u.id}/tasks/${e.id}/complete`,{completed:!e.completed},h),i()}catch(e){console.error("Failed to toggle task",e),alert("Failed to update task")}finally{x(!1)}}},g=async()=>{if(confirm("Are you sure you want to delete this task?")&&u&&h&&!m){x(!0);try{await l.default.delete(`/api/${u.id}/tasks/${e.id}`,h),i()}catch(e){console.error("Failed to delete task",e),alert("Failed to delete task")}finally{x(!1)}}};return(0,t.jsxs)("div",{className:`group bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 border border-slate-100 p-5 flex flex-col justify-between h-full ${e.completed?"opacity-75 bg-slate-50":""}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsx)("button",{onClick:f,disabled:m,className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${e.completed?"bg-green-500 border-green-500 text-white":"border-slate-300 hover:border-indigo-500 text-transparent"}`,children:(0,t.jsx)(r,{className:"w-3.5 h-3.5 stroke-[3]"})}),(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>c(e),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Edit task",children:(0,t.jsx)(d,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:g,className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete task",children:(0,t.jsx)(o,{className:"w-4 h-4"})})]})]}),(0,t.jsx)("h3",{className:`font-semibold text-lg mb-2 leading-tight ${e.completed?"text-slate-500 line-through decoration-slate-400":"text-slate-800"}`,children:e.title}),(0,t.jsx)("p",{className:`text-sm leading-relaxed ${e.completed?"text-slate-400":"text-slate-600"}`,children:e.description||"No description"})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-100 flex items-center gap-2 text-xs text-slate-400 font-medium",children:[(0,t.jsx)(n,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:p})]})]})}let u=(0,i.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),h=(0,i.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function m({onClose:e,onSuccess:i,editTask:r}){let{user:o,token:d}=(0,a.useAuth)(),[n,c]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{r&&(c(r.title),x(r.description))},[r]);let g=async t=>{if(t.preventDefault(),o&&d){f(!0);try{r?await l.default.put(`/api/${o.id}/tasks/${r.id}`,{title:n,description:m,completed:!1},d):await l.default.post(`/api/${o.id}/tasks`,{title:n,description:m},d),i(),e()}catch(e){console.error("Failed to save task",e),alert("Failed to save task")}finally{f(!1)}}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-100",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:r?"Edit Task":"New Task"}),(0,t.jsx)("button",{onClick:e,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:(0,t.jsx)(u,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:g,className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Title"}),(0,t.jsx)("input",{type:"text",required:!0,value:n,onChange:e=>c(e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all placeholder:text-slate-400",placeholder:"What needs to be done?",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Description"}),(0,t.jsx)("textarea",{value:m,onChange:e=>x(e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all placeholder:text-slate-400 min-h-[120px] resize-none",placeholder:"Add some details..."})]}),(0,t.jsxs)("div",{className:"pt-4 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:e,className:"px-5 py-2.5 text-slate-600 font-medium hover:bg-slate-50 rounded-lg transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",disabled:p,className:"px-5 py-2.5 bg-indigo-600 text-white font-medium hover:bg-indigo-700 rounded-lg shadow-lg shadow-indigo-500/30 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[p&&(0,t.jsx)(h,{className:"w-4 h-4 animate-spin"}),r?"Save Changes":"Create Task"]})]})]})]})})}let x=(0,i.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p=(0,i.default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);function f(){let{user:e,token:i}=(0,a.useAuth)(),[r,o]=(0,s.useState)([]),[d,n]=(0,s.useState)(!0),[u,f]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),y=async()=>{if(e&&i)try{let t=await l.default.get(`/api/${e.id}/tasks`,i);o(t.data||[])}catch(e){console.error("Failed to fetch tasks",e)}finally{n(!1)}};(0,s.useEffect)(()=>{e&&i&&y()},[e,i]);let j=[...r].sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return d?(0,t.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,t.jsx)(h,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"My Tasks"}),(0,t.jsxs)("p",{className:"text-slate-500 mt-1",children:["You have ",r.filter(e=>!e.completed).length," incomplete tasks."]})]}),(0,t.jsxs)("button",{onClick:()=>{b(null),f(!0)},className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg shadow-lg shadow-indigo-500/20 font-medium transition-all hover:scale-[1.02]",children:[(0,t.jsx)(x,{className:"w-5 h-5"}),"Add Task"]})]}),0===r.length?(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-12 text-center border-2 border-dashed border-slate-200",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(p,{className:"w-8 h-8 text-slate-400"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No tasks yet"}),(0,t.jsx)("p",{className:"text-slate-500 max-w-sm mx-auto mb-6",children:"Get started by creating your first task using the button above."}),(0,t.jsx)("button",{onClick:()=>{b(null),f(!0)},className:"text-indigo-600 font-semibold hover:text-indigo-700",children:"Create a task"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>(0,t.jsx)(c,{task:e,onUpdate:y,onEdit:()=>{b(e),f(!0)}},e.id))}),u&&(0,t.jsx)(m,{onClose:()=>f(!1),onSuccess:()=>{y()},editTask:g})]})}e.s(["default",()=>f],36080)}]);